<!DOCTYPE html>
<html class="alectryon-standalone"><head><title>Hoare.v</title><meta charset="utf-8"><meta content="Alectryon" name="generator"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="alectryon.css" rel="stylesheet"><link href="pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" /><script src="alectryon.js"></script></head><body><article class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI v8.13.0+0.13.0. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+↑</kbd> <kbd>Ctrl+↓</kbd> to navigate, <kbd>Ctrl+🖱️</kbd> to focus. On Mac, use <kbd>⌘</kbd> instead of <kbd>Ctrl</kbd>.</div><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Syntax.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Semantics.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> util.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> List.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Import</span> ListNotations.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk0"><span class="kn">Instance</span> <span class="nf">LExprEq</span> : EqDec LExpr.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">EqDec LExpr</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk1"><span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : LExpr, {x = y} + {x &lt;&gt; y}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="kp">repeat</span> <span class="bp">decide equality</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Defined</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk2"><span class="kn">Lemma</span> <span class="nf">terminalTerminated</span> :
    <span class="kr">forall</span> (<span class="nv">σ</span>:State),
    terminal (Terminated σ).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">σ</span> : State, terminal « σ »</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk3"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">σ</span> : State, terminal « σ »</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk4"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">terminal « σ »</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk5"><span class="nb">intros</span> [c&#39; H].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c'</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>« σ » ~&gt; c&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk6"><span class="kn">Lemma</span> <span class="nf">terminalAbortion</span> :
    terminal ↯.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">terminal ↯</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk7"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">terminal ↯</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk8"><span class="nb">intros</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">terminal ↯</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk9"><span class="nb">intros</span> [c&#39; H].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>c'</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>↯ ~&gt; c&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kt">False</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">From</span> <span class="kn">Equations</span> <span class="nf">Require</span> <span class="nv">Import</span> <span class="nv">Equations</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp"><span class="c">(* for easier dep induction *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Require Import</span> Coq.Program.Equality.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Section</span> <span class="nf">Syntactic</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">Property</span> := Expr.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Implicit Type</span> (P Q:Property) (e:Expr) (s:Stmt) (x:LExpr).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">replace</span> <span class="nv">P</span> <span class="nv">e</span> <span class="nv">x</span> {<span class="nv">struct</span> <span class="nv">P</span>} :=
        <span class="kr">match</span> P <span class="kr">with</span>
        | Binary o e1 e2 =&gt; Binary o (<span class="nb">replace</span> e1 e x) (<span class="nb">replace</span> e2 e x)
        | Unary o e1 =&gt; Unary o (<span class="nb">replace</span> e1 e x)
        | LVal l =&gt; <span class="kr">if</span> eqdec l x <span class="kr">then</span> e <span class="kr">else</span> P
        | Const v =&gt; P
        <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;P ⇒ Q&quot;</span> := (<span class="kr">forall</span> <span class="nv">σ</span>, σ ⊨ P -&gt; σ ⊨ Q) (<span class="kn">at level</span> <span class="mi">60</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Reserved Notation</span> <span class="s2">&quot;{{ P }} s {{ Q }}&quot;</span> (<span class="kn">at level</span> <span class="mi">50</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">hoare</span> : Property -&gt; Stmt -&gt; Property -&gt; <span class="kt">Prop</span> :=
        | hoareConsequence P P&#39; s Q Q&#39;:
            (P ⇒ P&#39;) -&gt;
            (Q&#39; ⇒ Q) -&gt;
            {{P&#39;}} s {{Q&#39;}} -&gt;
            {{P}} s {{Q}}
        | hoareAssign P x e: 
            {{ <span class="nb">replace</span> P e x }} (Assign x e) {{P}}
        | hoareWhile e s P Q:
            {{Binary And P e}} s {{P}} -&gt;
            {{P}} While e s {{Binary And P (Unary Not e)}}
        | hoareIf b s1 s2 P Q:
            {{Binary And P b}} s1 {{Q}} -&gt;
            {{Binary And P (Unary Not b)}} s2 {{Q}} -&gt;
            {{P}} If b s1 s2 {{Q}}
        | hoareSkip P P:
            {{P}} Block [] {{P}}
        | hoareBlock s B P Q R:
            {{P}} s {{Q}} -&gt;
            {{Q}} Block B {{R}} -&gt;
            {{P}} Block (s::B) {{R}}
        | hoareAssert P e:
            (P ⇒ e) -&gt;
            {{P}} (Assert e) {{P}}
        | hoareAssume P e:
            {{P}} (Assume e) {{Binary And P e}}
        <span class="kn">where</span> <span class="s2">&quot;{{ P }} s {{ Q }}&quot;</span> := (hoare P s Q).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;⊢ {{ P }} s {{ Q }}&quot;</span> := (hoare P s Q) (<span class="kn">at level</span> <span class="mi">50</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Definition</span> <span class="nf">partial_correctness</span> <span class="nv">P</span> <span class="nv">s</span> <span class="nv">Q</span> :=
        <span class="kr">forall</span> (<span class="nv">σ</span>:State),
        σ ⊨ P -&gt;
        <span class="kr">forall</span> (<span class="nv">c</span>:Conf),
        ⟨ s | σ ⟩ ⇓B c -&gt;
        c ⊨c Q.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Notation</span> <span class="s2">&quot;⊨ {{ P }} s {{ Q }}&quot;</span> := (partial_correctness P s Q) (<span class="kn">at level</span> <span class="mi">50</span>).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Ltac</span> <span class="nf">inv_subst</span> H :=
        <span class="nb">inversion</span> H;<span class="nb">subst</span>;<span class="nb">clear</span> H.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Derive</span> <span class="nf">Signature</span> <span class="kr">for</span> properBigStep.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Derive</span> <span class="nf">Signature</span> <span class="kr">for</span> hoare.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

    <span class="c">(* Lemma smallstep_bigstep_equiv s σ c:</span>
<span class="c">        (bigStep ⟨s|σ⟩ c) -&gt;</span>
<span class="c">        (⟨s|σ⟩ ⇓B c).</span>
<span class="c">    Abort. *)</span>

</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chka"><span class="kn">Lemma</span> <span class="nf">lookup_update</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">H</span>} (<span class="nv">μ</span>:Env A B) <span class="nv">a</span> <span class="nv">v</span>:
      @lookup A B H (μ {a ↦ v}) a = Some v.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>util.EqDec A</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>Env A B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lookup (μ {a ↦ v}) a = Some v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chkb"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>util.EqDec A</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>Env A B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lookup (μ {a ↦ v}) a = Some v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chkc"><span class="nb">unfold</span> lookup, update.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>util.EqDec A</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>Env A B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">r &lt;-
find (<span class="kr">fun</span> <span class="nv">d</span> : A * B =&gt; eqb (fst d) a) ((a, v) :: μ);;
Some (snd r) = Some v</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chkd"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>util.EqDec A</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>Env A B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">r &lt;-
(<span class="kr">if</span> eqb a a
 <span class="kr">then</span> Some (a, v)
 <span class="kr">else</span> find (<span class="kr">fun</span> <span class="nv">d</span> : A * B =&gt; eqb (fst d) a) μ);;
Some (snd r) = Some v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chke"><span class="nb">unfold</span> eqb.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>util.EqDec A</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>Env A B</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">r &lt;-
(<span class="kr">if</span> <span class="kr">if</span> eqdec a a <span class="kr">then</span> true <span class="kr">else</span> false
 <span class="kr">then</span> Some (a, v)
 <span class="kr">else</span>
  find
    (<span class="kr">fun</span> <span class="nv">d</span> : A * B =&gt;
     <span class="kr">if</span> eqdec (fst d) a <span class="kr">then</span> true <span class="kr">else</span> false) μ);;
Some (snd r) = Some v</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> eqdec;<span class="nb">auto</span>;<span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chkf"><span class="kn">Lemma</span> <span class="nf">lookup_not_update</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">H</span>} (<span class="nv">μ</span>:Env A B) <span class="nv">a</span> <span class="nv">b</span> <span class="nv">v</span>:
      a &lt;&gt; b -&gt;
      @lookup A B H (μ {b ↦ v}) a = @lookup A B H (μ) a.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>util.EqDec A</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>Env A B</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a &lt;&gt; b -&gt; lookup (μ {b ↦ v}) a = lookup μ a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk10"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>util.EqDec A</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>Env A B</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a &lt;&gt; b -&gt; lookup (μ {b ↦ v}) a = lookup μ a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk11" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk11"><span class="nb">intros</span> Heq.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>util.EqDec A</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>Env A B</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">lookup (μ {b ↦ v}) a = lookup μ a</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk12"><span class="nb">unfold</span> lookup, update.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>util.EqDec A</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>Env A B</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">r &lt;-
find (<span class="kr">fun</span> <span class="nv">d</span> : A * B =&gt; eqb (fst d) a) ((b, v) :: μ);;
Some (snd r) =
r &lt;- find (<span class="kr">fun</span> <span class="nv">d</span> : A * B =&gt; eqb (fst d) a) μ;;
Some (snd r)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk13"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>util.EqDec A</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>Env A B</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">r &lt;-
(<span class="kr">if</span> eqb b a
 <span class="kr">then</span> Some (b, v)
 <span class="kr">else</span> find (<span class="kr">fun</span> <span class="nv">d</span> : A * B =&gt; eqb (fst d) a) μ);;
Some (snd r) =
r &lt;- find (<span class="kr">fun</span> <span class="nv">d</span> : A * B =&gt; eqb (fst d) a) μ;;
Some (snd r)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk14"><span class="nb">unfold</span> eqb.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>A, B</var><span class="hyp-type"><b>: </b><span><span class="kt">Type</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>util.EqDec A</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>Env A B</span></span></span><br><span><var>a, b</var><span class="hyp-type"><b>: </b><span>A</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>B</span></span></span><br><span><var>Heq</var><span class="hyp-type"><b>: </b><span>a &lt;&gt; b</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">r &lt;-
(<span class="kr">if</span> <span class="kr">if</span> eqdec b a <span class="kr">then</span> true <span class="kr">else</span> false
 <span class="kr">then</span> Some (b, v)
 <span class="kr">else</span>
  find
    (<span class="kr">fun</span> <span class="nv">d</span> : A * B =&gt;
     <span class="kr">if</span> eqdec (fst d) a <span class="kr">then</span> true <span class="kr">else</span> false) μ);;
Some (snd r) =
r &lt;-
find
  (<span class="kr">fun</span> <span class="nv">d</span> : A * B =&gt;
   <span class="kr">if</span> eqdec (fst d) a <span class="kr">then</span> true <span class="kr">else</span> false) μ;;
Some (snd r)</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> eqdec;<span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
    <span class="c">(* should be formulated using fresh_var instead *)</span>
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Variable</span> (<span class="nv">H_fresh_vars</span>: <span class="kr">forall</span> (<span class="nv">ρ</span>:VarEnv) (<span class="nv">x</span> <span class="nv">y</span>:VarT) (<span class="nv">a_x</span> <span class="nv">a_y</span>:AddrT),
        x &lt;&gt; y -&gt;
        lookup ρ x = Some a_x -&gt;
        lookup ρ y = Some a_y -&gt;
        a_x &lt;&gt; a_y
    ).</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk15"><span class="kn">Lemma</span> <span class="nf">replace_subst</span> <span class="nv">P</span> <span class="nv">e</span> <span class="nv">x</span> <span class="nv">ρ</span> <span class="nv">μ</span> <span class="nv">a</span> <span class="nv">v</span>:
    <span class="kr">let</span> <span class="nv">σ</span> := (ρ, μ) <span class="kr">in</span>
      L⟦ x ⟧ σ = Some a -&gt;
      R⟦ e ⟧ σ = Some v -&gt;
      R⟦ <span class="nb">replace</span> P e x ⟧ σ = 
      R⟦ P ⟧ (ρ, μ {a ↦ v}).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">let</span> <span class="nv">σ</span> := (ρ, μ) <span class="kr">in</span>
L⟦ x ⟧ σ = Some a -&gt;
R⟦ e ⟧ σ = Some v -&gt;
R⟦ <span class="nb">replace</span> P e x ⟧ σ = R⟦ P ⟧ (ρ, μ {a ↦ v})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk16"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">let</span> <span class="nv">σ</span> := (ρ, μ) <span class="kr">in</span>
L⟦ x ⟧ σ = Some a -&gt;
R⟦ e ⟧ σ = Some v -&gt;
R⟦ <span class="nb">replace</span> P e x ⟧ σ = R⟦ P ⟧ (ρ, μ {a ↦ v})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk17"><span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">L⟦ x ⟧ (ρ, μ) = Some a -&gt;
R⟦ e ⟧ (ρ, μ) = Some v -&gt;
R⟦ <span class="nb">replace</span> P e x ⟧ (ρ, μ) = R⟦ P ⟧ (ρ, μ {a ↦ v})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk18" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk18"><span class="nb">intros</span> Hx He.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R⟦ <span class="nb">replace</span> P e x ⟧ (ρ, μ) = R⟦ P ⟧ (ρ, μ {a ↦ v})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk19" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk19"><span class="nb">induction</span> P.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R⟦ <span class="nb">replace</span> (Const c) e x ⟧ (ρ, μ) =
R⟦ Const c ⟧ (ρ, μ {a ↦ v})</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk1a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>Op</span></span></span><br><span><var>P1, P2, e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br><span><var>IHP1</var><span class="hyp-type"><b>: </b><span>R⟦ <span class="nb">replace</span> P1 e x ⟧ (ρ, μ) =
R⟦ P1 ⟧ (ρ, μ {a ↦ v})</span></span></span><br><span><var>IHP2</var><span class="hyp-type"><b>: </b><span>R⟦ <span class="nb">replace</span> P2 e x ⟧ (ρ, μ) =
R⟦ P2 ⟧ (ρ, μ {a ↦ v})</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk1a"><hr></label><div class="goal-conclusion">R⟦ <span class="nb">replace</span> (Binary o P1 P2) e x ⟧ (ρ, μ) =
R⟦ Binary o P1 P2 ⟧ (ρ, μ {a ↦ v})</div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk1b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>UOp</span></span></span><br><span><var>P, e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br><span><var>IHP</var><span class="hyp-type"><b>: </b><span>R⟦ <span class="nb">replace</span> P e x ⟧ (ρ, μ) =
R⟦ P ⟧ (ρ, μ {a ↦ v})</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk1b"><hr></label><div class="goal-conclusion">R⟦ <span class="nb">replace</span> (Unary o P) e x ⟧ (ρ, μ) =
R⟦ Unary o P ⟧ (ρ, μ {a ↦ v})</div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk1c" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk1c"><hr></label><div class="goal-conclusion">R⟦ <span class="nb">replace</span> (LVal l) e x ⟧ (ρ, μ) =
R⟦ LVal l ⟧ (ρ, μ {a ↦ v})</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk1d"><span class="mi">1</span>-<span class="mi">3</span>: <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ret c = ret c</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk1e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>Op</span></span></span><br><span><var>P1, P2, e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br><span><var>IHP1</var><span class="hyp-type"><b>: </b><span>R⟦ <span class="nb">replace</span> P1 e x ⟧ (ρ, μ) =
R⟦ P1 ⟧ (ρ, μ {a ↦ v})</span></span></span><br><span><var>IHP2</var><span class="hyp-type"><b>: </b><span>R⟦ <span class="nb">replace</span> P2 e x ⟧ (ρ, μ) =
R⟦ P2 ⟧ (ρ, μ {a ↦ v})</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk1e"><hr></label><div class="goal-conclusion">v1 &lt;- R⟦ <span class="nb">replace</span> P1 e x ⟧ (ρ, μ);;
v2 &lt;- R⟦ <span class="nb">replace</span> P2 e x ⟧ (ρ, μ);; evalOp o v1 v2 =
v1 &lt;- R⟦ P1 ⟧ (ρ, μ {a ↦ v});;
v2 &lt;- R⟦ P2 ⟧ (ρ, μ {a ↦ v});; evalOp o v1 v2</div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk1f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>UOp</span></span></span><br><span><var>P, e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br><span><var>IHP</var><span class="hyp-type"><b>: </b><span>R⟦ <span class="nb">replace</span> P e x ⟧ (ρ, μ) =
R⟦ P ⟧ (ρ, μ {a ↦ v})</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk1f"><hr></label><div class="goal-conclusion">v1 &lt;- R⟦ <span class="nb">replace</span> P e x ⟧ (ρ, μ);; evalUOp o v1 =
v1 &lt;- R⟦ P ⟧ (ρ, μ {a ↦ v});; evalUOp o v1</div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk20" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk20"><hr></label><div class="goal-conclusion">R⟦ <span class="nb">replace</span> (LVal l) e x ⟧ (ρ, μ) =
R⟦ LVal l ⟧ (ρ, μ {a ↦ v})</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk21">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">ret c = ret c</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>. <span class="c">(* Const *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk22">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>Op</span></span></span><br><span><var>P1, P2, e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br><span><var>IHP1</var><span class="hyp-type"><b>: </b><span>R⟦ <span class="nb">replace</span> P1 e x ⟧ (ρ, μ) =
R⟦ P1 ⟧ (ρ, μ {a ↦ v})</span></span></span><br><span><var>IHP2</var><span class="hyp-type"><b>: </b><span>R⟦ <span class="nb">replace</span> P2 e x ⟧ (ρ, μ) =
R⟦ P2 ⟧ (ρ, μ {a ↦ v})</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v1 &lt;- R⟦ <span class="nb">replace</span> P1 e x ⟧ (ρ, μ);;
v2 &lt;- R⟦ <span class="nb">replace</span> P2 e x ⟧ (ρ, μ);; evalOp o v1 v2 =
v1 &lt;- R⟦ P1 ⟧ (ρ, μ {a ↦ v});;
v2 &lt;- R⟦ P2 ⟧ (ρ, μ {a ↦ v});; evalOp o v1 v2</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> &lt;- IHP1, &lt;- IHP2. <span class="c">(* Binary *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk23">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>o</var><span class="hyp-type"><b>: </b><span>UOp</span></span></span><br><span><var>P, e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br><span><var>IHP</var><span class="hyp-type"><b>: </b><span>R⟦ <span class="nb">replace</span> P e x ⟧ (ρ, μ) =
R⟦ P ⟧ (ρ, μ {a ↦ v})</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v1 &lt;- R⟦ <span class="nb">replace</span> P e x ⟧ (ρ, μ);; evalUOp o v1 =
v1 &lt;- R⟦ P ⟧ (ρ, μ {a ↦ v});; evalUOp o v1</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> &lt;- IHP. <span class="c">(* Unary *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk24">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R⟦ <span class="nb">replace</span> (LVal l) e x ⟧ (ρ, μ) =
R⟦ LVal l ⟧ (ρ, μ {a ↦ v})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk25" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk25"><span class="nb">cbn</span> [<span class="nb">replace</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R⟦ <span class="kr">if</span> eqdec l x <span class="kr">then</span> e <span class="kr">else</span> LVal l ⟧ (ρ, μ) =
R⟦ LVal l ⟧ (ρ, μ {a ↦ v})</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk26"><span class="nb">destruct</span> (eqdec l x) <span class="kr">as</span> [-&gt; | Hxl].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R⟦ e ⟧ (ρ, μ) = R⟦ LVal x ⟧ (ρ, μ {a ↦ v})</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk27" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br><span><var>Hxl</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; x</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk27"><hr></label><div class="goal-conclusion">R⟦ LVal l ⟧ (ρ, μ) = R⟦ LVal l ⟧ (ρ, μ {a ↦ v})</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk28" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk28">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R⟦ e ⟧ (ρ, μ) = R⟦ LVal x ⟧ (ρ, μ {a ↦ v})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk29" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk29"><span class="nb">destruct</span> x;<span class="nb">cbn</span> <span class="kr">in</span> *;<span class="nb">unfold</span> ρmap, μmap <span class="kr">in</span> *;<span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>VarT</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>lookup ρ v0 = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R⟦ e ⟧ (ρ, μ) =
a0 &lt;- lookup ρ v0;;
uv &lt;- lookup (μ {a ↦ v}) a0;;
<span class="kr">match</span> uv <span class="kr">with</span>
| Undef =&gt; None
| <span class="kn">Defined</span> v =&gt; ret v
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk2a" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk2a"><span class="nb">rewrite</span> He, Hx;<span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>VarT</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>lookup ρ v0 = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some v =
uv &lt;- lookup (μ {a ↦ v}) a;;
<span class="kr">match</span> uv <span class="kr">with</span>
| Undef =&gt; None
| <span class="kn">Defined</span> v =&gt; ret v
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">rewrite</span> lookup_update;<span class="nb">cbn</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk2b" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk2b">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>l</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ (ρ, μ) = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br><span><var>Hxl</var><span class="hyp-type"><b>: </b><span>l &lt;&gt; x</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R⟦ LVal l ⟧ (ρ, μ) = R⟦ LVal l ⟧ (ρ, μ {a ↦ v})</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk2c" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk2c"><span class="nb">destruct</span> l,x;<span class="nb">cbn</span> <span class="kr">in</span> *;<span class="nb">unfold</span> ρmap, μmap <span class="kr">in</span> *;<span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>VarT</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>VarT</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>lookup ρ v1 = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br><span><var>Hxl</var><span class="hyp-type"><b>: </b><span>Var v0 &lt;&gt; Var v1</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">a &lt;- lookup ρ v0;;
uv &lt;- lookup μ a;;
<span class="kr">match</span> uv <span class="kr">with</span>
| Undef =&gt; None
| <span class="kn">Defined</span> v =&gt; ret v
<span class="kr">end</span> =
a0 &lt;- lookup ρ v0;;
uv &lt;- lookup (μ {a ↦ v}) a0;;
<span class="kr">match</span> uv <span class="kr">with</span>
| Undef =&gt; None
| <span class="kn">Defined</span> v =&gt; ret v
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk2d" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk2d"><span class="nb">destruct</span> (lookup _ v0) <span class="nb">eqn</span>: Hv;<span class="nb">cbn</span>;[|<span class="bp">reflexivity</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>VarT</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>VarT</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>lookup ρ v1 = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br><span><var>Hxl</var><span class="hyp-type"><b>: </b><span>Var v0 &lt;&gt; Var v1</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>lookup ρ v0 = Some a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uv &lt;- lookup μ a0;;
<span class="kr">match</span> uv <span class="kr">with</span>
| Undef =&gt; None
| <span class="kn">Defined</span> v =&gt; ret v
<span class="kr">end</span> =
uv &lt;- lookup (μ {a ↦ v}) a0;;
<span class="kr">match</span> uv <span class="kr">with</span>
| Undef =&gt; None
| <span class="kn">Defined</span> v =&gt; ret v
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk2e" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk2e"><span class="nb">rewrite</span> lookup_not_update.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>VarT</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>VarT</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>lookup ρ v1 = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br><span><var>Hxl</var><span class="hyp-type"><b>: </b><span>Var v0 &lt;&gt; Var v1</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>lookup ρ v0 = Some a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uv &lt;- lookup μ a0;;
<span class="kr">match</span> uv <span class="kr">with</span>
| Undef =&gt; None
| <span class="kn">Defined</span> v =&gt; ret v
<span class="kr">end</span> =
uv &lt;- lookup μ a0;;
<span class="kr">match</span> uv <span class="kr">with</span>
| Undef =&gt; None
| <span class="kn">Defined</span> v =&gt; ret v
<span class="kr">end</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk2f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>VarT</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>VarT</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>lookup ρ v1 = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br><span><var>Hxl</var><span class="hyp-type"><b>: </b><span>Var v0 &lt;&gt; Var v1</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>lookup ρ v0 = Some a0</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk2f"><hr></label><div class="goal-conclusion">a0 &lt;&gt; a</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk30" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk30"><span class="mi">2</span>: <span class="nb">eapply</span> H_fresh_vars;<span class="kp">try</span> <span class="bp">eassumption</span>;<span class="bp">contradict</span> Hxl;<span class="bp">now</span> <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>v0</var><span class="hyp-type"><b>: </b><span>VarT</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>v1</var><span class="hyp-type"><b>: </b><span>VarT</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>Hx</var><span class="hyp-type"><b>: </b><span>lookup ρ v1 = Some a</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ (ρ, μ) = Some v</span></span></span><br><span><var>Hxl</var><span class="hyp-type"><b>: </b><span>Var v0 &lt;&gt; Var v1</span></span></span><br><span><var>a0</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>Hv</var><span class="hyp-type"><b>: </b><span>lookup ρ v0 = Some a0</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">uv &lt;- lookup μ a0;;
<span class="kr">match</span> uv <span class="kr">with</span>
| Undef =&gt; None
| <span class="kn">Defined</span> v =&gt; ret v
<span class="kr">end</span> =
uv &lt;- lookup μ a0;;
<span class="kr">match</span> uv <span class="kr">with</span>
| Undef =&gt; None
| <span class="kn">Defined</span> v =&gt; ret v
<span class="kr">end</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">reflexivity</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">
</span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk31" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk31"><span class="kn">Lemma</span> <span class="nf">soundness</span> <span class="nv">P</span> <span class="nv">s</span> <span class="nv">Q</span>:
        ⊢ {{ P }} s {{ Q }} -&gt;
        ⊨ {{ P }} s {{ Q }}.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">⊢ {{P}} s {{Q}} -&gt; ⊨ {{P}} s {{Q}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk32" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk32"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">⊢ {{P}} s {{Q}} -&gt; ⊨ {{P}} s {{Q}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk33" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk33"><span class="nb">intros</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{P}} s {{Q}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">⊨ {{P}} s {{Q}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk34" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk34"><span class="nb">induction</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P ⇒ P&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q&#39; ⇒ Q</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>⊢ {{P&#39;}} s {{Q&#39;}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{P&#39;}} s {{Q&#39;}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">⊨ {{P}} s {{Q}}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk35" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk35"><hr></label><div class="goal-conclusion">⊨ {{<span class="nb">replace</span> P e x}} Assign x e {{P}}</div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk36" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk36"><hr></label><div class="goal-conclusion">⊨ {{P}} While e s {{Binary And P (Unary Not e)}}</div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk37" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P b}} s1 {{Q}}</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P (Unary Not b)}} s2 {{Q}}</span></span></span><br><span><var>IHhoare1</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P b}} s1 {{Q}}</span></span></span><br><span><var>IHhoare2</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P (Unary Not b)}} s2 {{Q}}</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk37"><hr></label><div class="goal-conclusion">⊨ {{P}} If b s1 s2 {{Q}}</div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk38" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, P0</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk38"><hr></label><div class="goal-conclusion">⊨ {{P0}} Block [] {{P0}}</div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk39" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>list Stmt</span></span></span><br><span><var>P, Q, R</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{P}} s {{Q}}</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>⊢ {{Q}} Block B {{R}}</span></span></span><br><span><var>IHhoare1</var><span class="hyp-type"><b>: </b><span>⊨ {{P}} s {{Q}}</span></span></span><br><span><var>IHhoare2</var><span class="hyp-type"><b>: </b><span>⊨ {{Q}} Block B {{R}}</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk39"><hr></label><div class="goal-conclusion">⊨ {{P}} Block (s :: B) {{R}}</div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk3a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P ⇒ e</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk3a"><hr></label><div class="goal-conclusion">⊨ {{P}} Assert e {{P}}</div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk3b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk3b"><hr></label><div class="goal-conclusion">⊨ {{P}} Assume e {{Binary And P e}}</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk3c" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk3c">- <span class="c">(* Consequence *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P ⇒ P&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q&#39; ⇒ Q</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>⊢ {{P&#39;}} s {{Q&#39;}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{P&#39;}} s {{Q&#39;}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">⊨ {{P}} s {{Q}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk3d" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk3d"><span class="nb">intros</span> σ HP c Hterm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P ⇒ P&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q&#39; ⇒ Q</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>⊢ {{P&#39;}} s {{Q&#39;}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{P&#39;}} s {{Q&#39;}}</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>Hterm</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">c ⊨c Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk3e" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk3e"><span class="nb">assert</span> (σ ⊨ P&#39;) <span class="kr">as</span> HP&#39; <span class="bp">by</span> <span class="bp">now</span> <span class="nb">apply</span> H.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P ⇒ P&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q&#39; ⇒ Q</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>⊢ {{P&#39;}} s {{Q&#39;}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{P&#39;}} s {{Q&#39;}}</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>Hterm</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B c</span></span></span><br><span><var>HP'</var><span class="hyp-type"><b>: </b><span>σ ⊨ P&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">c ⊨c Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk3f" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk3f"><span class="nb">destruct</span> (IHhoare _ HP&#39; c Hterm) <span class="kr">as</span> [σ&#39; [-&gt; HQ&#39;]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, P'</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>Q, Q'</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P ⇒ P&#39;</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>Q&#39; ⇒ Q</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>⊢ {{P&#39;}} s {{Q&#39;}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{P&#39;}} s {{Q&#39;}}</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br><span><var>σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>Hterm</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HP'</var><span class="hyp-type"><b>: </b><span>σ ⊨ P&#39;</span></span></span><br><span><var>HQ'</var><span class="hyp-type"><b>: </b><span>σ&#39; ⊨ Q&#39;</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">« σ&#39; » ⊨c Q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="kr">exists</span> <span class="nv">σ&#39;</span>;<span class="nb">split</span>;<span class="nb">auto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk40" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk40">- <span class="c">(* Assign *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">⊨ {{<span class="nb">replace</span> P e x}} Assign x e {{P}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk41" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk41"><span class="nb">intros</span> σ HP c Hterm.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ <span class="nb">replace</span> P e x</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>Hterm</var><span class="hyp-type"><b>: </b><span>⟨ Assign x e | σ ⟩ ⇓B c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">c ⊨c P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk42" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk42">depelim Hterm;<span class="kp">try</span> <span class="bp">congruence</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>σ</var><span><span class="hyp-body"><b>:= </b><span>(ρ, μ)</span></span><span class="hyp-type"><b>: </b><span>(VarEnv * MemEnv)%type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ <span class="nb">replace</span> P e x</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ σ = Some v</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ σ = Some a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">« (ρ, μ {a ↦ v}) » ⊨c P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk43" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk43"><span class="nb">eexists</span>;<span class="nb">split</span>;[<span class="bp">reflexivity</span>|].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>σ</var><span><span class="hyp-body"><b>:= </b><span>(ρ, μ)</span></span><span class="hyp-type"><b>: </b><span>(VarEnv * MemEnv)%type</span></span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ <span class="nb">replace</span> P e x</span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ σ = Some v</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ σ = Some a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ρ, μ {a ↦ v}) ⊨ P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk44" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk44"><span class="nb">destruct</span> HP <span class="kr">as</span> [np [Hp Hnp]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>σ</var><span><span class="hyp-body"><b>:= </b><span>(ρ, μ)</span></span><span class="hyp-type"><b>: </b><span>(VarEnv * MemEnv)%type</span></span></span></span><br><span><var>np</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span>R⟦ <span class="nb">replace</span> P e x ⟧ σ = Some np</span></span></span><br><span><var>Hnp</var><span class="hyp-type"><b>: </b><span>np &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ σ = Some v</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ σ = Some a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(ρ, μ {a ↦ v}) ⊨ P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk45" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk45"><span class="kr">exists</span> <span class="nv">np</span>;<span class="nb">split</span>;[|<span class="bp">assumption</span>].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>LExpr</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>ρ</var><span class="hyp-type"><b>: </b><span>VarEnv</span></span></span><br><span><var>μ</var><span class="hyp-type"><b>: </b><span>MemEnv</span></span></span><br><span><var>σ</var><span><span class="hyp-body"><b>:= </b><span>(ρ, μ)</span></span><span class="hyp-type"><b>: </b><span>(VarEnv * MemEnv)%type</span></span></span></span><br><span><var>np</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span>R⟦ <span class="nb">replace</span> P e x ⟧ σ = Some np</span></span></span><br><span><var>Hnp</var><span class="hyp-type"><b>: </b><span>np &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>a</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>v</var><span class="hyp-type"><b>: </b><span>Val</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ σ = Some v</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>L⟦ x ⟧ σ = Some a</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">R⟦ P ⟧ (ρ, μ {a ↦ v}) = Some np</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">now</span> <span class="nb">erewrite</span> &lt;- replace_subst;<span class="bp">eassumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk46" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk46">- <span class="c">(* While *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">⊨ {{P}} While e s {{Binary And P (Unary Not e)}}</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk47" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk47"><span class="nb">intros</span> σ HP c.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">⟨ While e s | σ ⟩ ⇓B c -&gt;
c ⊨c Binary And P (Unary Not e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk48" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk48"><span class="nb">intros</span> HWhile.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>HWhile</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ ⟩ ⇓B c</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">c ⊨c Binary And P (Unary Not e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk49" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk49"><span class="nb">dependent induction</span> HWhile;<span class="kp">try</span> <span class="bp">congruence</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>HWhile1</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HWhile2</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ&#39; ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
« σ&#39; » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>IHHWhile2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e0</span> <span class="nv">s0</span>,
⊢ {{Binary And P e0}} s0 {{P}} -&gt;
⊨ {{Binary And P e0}} s0 {{P}} -&gt;
σ&#39; ⊨ P -&gt;
While e s = While e0 s0 -&gt;
c ⊨c Binary And P (Unary Not e0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">c ⊨c Binary And P (Unary Not e)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk4a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ Unary Not e</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk4a"><hr></label><div class="goal-conclusion">« σ » ⊨c Binary And P (Unary Not e)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk4b" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>~ isProperTerm c</span></span></span><br><span><var>HWhile</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
c ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk4b"><hr></label><div class="goal-conclusion">c ⊨c Binary And P (Unary Not e)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk4c" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk4c">+ <span class="c">(* σ ⊨ e *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>HWhile1</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HWhile2</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ&#39; ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
« σ&#39; » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>IHHWhile2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e0</span> <span class="nv">s0</span>,
⊢ {{Binary And P e0}} s0 {{P}} -&gt;
⊨ {{Binary And P e0}} s0 {{P}} -&gt;
σ&#39; ⊨ P -&gt;
While e s = While e0 s0 -&gt;
c ⊨c Binary And P (Unary Not e0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">c ⊨c Binary And P (Unary Not e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk4d" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk4d"><span class="nb">eapply</span> IHHWhile2.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>HWhile1</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HWhile2</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ&#39; ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
« σ&#39; » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>IHHWhile2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e0</span> <span class="nv">s0</span>,
⊢ {{Binary And P e0}} s0 {{P}} -&gt;
⊨ {{Binary And P e0}} s0 {{P}} -&gt;
σ&#39; ⊨ P -&gt;
While e s = While e0 s0 -&gt;
c ⊨c Binary And P (Unary Not e0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">⊢ {{Binary And P e}} <span class="nl">?s</span> {{P}}</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk4e" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>HWhile1</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HWhile2</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ&#39; ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
« σ&#39; » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>IHHWhile2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e0</span> <span class="nv">s0</span>,
⊢ {{Binary And P e0}} s0 {{P}} -&gt;
⊨ {{Binary And P e0}} s0 {{P}} -&gt;
σ&#39; ⊨ P -&gt;
While e s = While e0 s0 -&gt;
c ⊨c Binary And P (Unary Not e0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk4e"><hr></label><div class="goal-conclusion">⊨ {{Binary And P e}} <span class="nl">?s</span> {{P}}</div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk4f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>HWhile1</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HWhile2</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ&#39; ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
« σ&#39; » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>IHHWhile2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e0</span> <span class="nv">s0</span>,
⊢ {{Binary And P e0}} s0 {{P}} -&gt;
⊨ {{Binary And P e0}} s0 {{P}} -&gt;
σ&#39; ⊨ P -&gt;
While e s = While e0 s0 -&gt;
c ⊨c Binary And P (Unary Not e0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk4f"><hr></label><div class="goal-conclusion">σ&#39; ⊨ P</div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk50" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>HWhile1</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HWhile2</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ&#39; ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
« σ&#39; » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>IHHWhile2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e0</span> <span class="nv">s0</span>,
⊢ {{Binary And P e0}} s0 {{P}} -&gt;
⊨ {{Binary And P e0}} s0 {{P}} -&gt;
σ&#39; ⊨ P -&gt;
While e s = While e0 s0 -&gt;
c ⊨c Binary And P (Unary Not e0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk50"><hr></label><div class="goal-conclusion">While e s = While e <span class="nl">?s</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk51" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk51"><span class="kp">all</span>: <span class="kp">try</span> <span class="nb">eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>HWhile1</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HWhile2</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ&#39; ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
« σ&#39; » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>IHHWhile2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e0</span> <span class="nv">s0</span>,
⊢ {{Binary And P e0}} s0 {{P}} -&gt;
⊨ {{Binary And P e0}} s0 {{P}} -&gt;
σ&#39; ⊨ P -&gt;
While e s = While e0 s0 -&gt;
c ⊨c Binary And P (Unary Not e0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ&#39; ⊨ P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk52" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk52"><span class="nb">assert</span>( σ ⊨ Binary And P e) <span class="kr">as</span> HPe.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>HWhile1</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HWhile2</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ&#39; ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
« σ&#39; » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>IHHWhile2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e0</span> <span class="nv">s0</span>,
⊢ {{Binary And P e0}} s0 {{P}} -&gt;
⊨ {{Binary And P e0}} s0 {{P}} -&gt;
σ&#39; ⊨ P -&gt;
While e s = While e0 s0 -&gt;
c ⊨c Binary And P (Unary Not e0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ ⊨ Binary And P e</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk53" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>HWhile1</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HWhile2</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ&#39; ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
« σ&#39; » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>IHHWhile2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e0</span> <span class="nv">s0</span>,
⊢ {{Binary And P e0}} s0 {{P}} -&gt;
⊨ {{Binary And P e0}} s0 {{P}} -&gt;
σ&#39; ⊨ P -&gt;
While e s = While e0 s0 -&gt;
c ⊨c Binary And P (Unary Not e0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br><span><var>HPe</var><span class="hyp-type"><b>: </b><span>σ ⊨ Binary And P e</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk53"><hr></label><div class="goal-conclusion">σ&#39; ⊨ P</div></blockquote></div></div></div></small><span class="alectryon-wsp"> 
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk54" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk54">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>HWhile1</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HWhile2</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ&#39; ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
« σ&#39; » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>IHHWhile2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e0</span> <span class="nv">s0</span>,
⊢ {{Binary And P e0}} s0 {{P}} -&gt;
⊨ {{Binary And P e0}} s0 {{P}} -&gt;
σ&#39; ⊨ P -&gt;
While e s = While e0 s0 -&gt;
c ⊨c Binary And P (Unary Not e0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ ⊨ Binary And P e</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk55" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk55"><span class="nb">destruct</span> HP <span class="kr">as</span> [np [Hp Hnp]];
            <span class="nb">destruct</span> H0 <span class="kr">as</span> [ne [He Hne]];<span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>ne</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ σ = Some ne</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>ne &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>HWhile1</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HWhile2</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ&#39; ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
« σ&#39; » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>IHHWhile2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e0</span> <span class="nv">s0</span>,
⊢ {{Binary And P e0}} s0 {{P}} -&gt;
⊨ {{Binary And P e0}} s0 {{P}} -&gt;
σ&#39; ⊨ P -&gt;
While e s = While e0 s0 -&gt;
c ⊨c Binary And P (Unary Not e0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>np</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span>R⟦ P ⟧ σ = Some np</span></span></span><br><span><var>Hnp</var><span class="hyp-type"><b>: </b><span>np &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ ⊨ Binary And P e</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk56" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk56"><span class="kr">exists</span> (<span class="nv">if</span> <span class="nv">match</span> <span class="nv">np</span> <span class="nv">with</span>
            | <span class="mi">0</span> =&gt; true
            | S _ =&gt; false
            <span class="kr">end</span> <span class="kr">then</span> <span class="mi">0</span> <span class="kr">else</span> ne);<span class="nb">cbn</span>;
            <span class="nb">rewrite</span> Hp, He;<span class="nb">cbn</span>;<span class="nb">split</span>;<span class="nb">auto</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>ne</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ e ⟧ σ = Some ne</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>ne &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>HWhile1</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HWhile2</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ&#39; ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
« σ&#39; » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>IHHWhile2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e0</span> <span class="nv">s0</span>,
⊢ {{Binary And P e0}} s0 {{P}} -&gt;
⊨ {{Binary And P e0}} s0 {{P}} -&gt;
σ&#39; ⊨ P -&gt;
While e s = While e0 s0 -&gt;
c ⊨c Binary And P (Unary Not e0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>np</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hp</var><span class="hyp-type"><b>: </b><span>R⟦ P ⟧ σ = Some np</span></span></span><br><span><var>Hnp</var><span class="hyp-type"><b>: </b><span>np &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(<span class="kr">if</span> <span class="kr">match</span> np <span class="kr">with</span>
    | <span class="mi">0</span> =&gt; true
    | S _ =&gt; false
    <span class="kr">end</span>
 <span class="kr">then</span> <span class="mi">0</span>
 <span class="kr">else</span> ne) &lt;&gt; <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">            </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> np, ne;<span class="bp">congruence</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk57" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk57">}</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>HWhile1</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HWhile2</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ&#39; ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
« σ&#39; » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>IHHWhile2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e0</span> <span class="nv">s0</span>,
⊢ {{Binary And P e0}} s0 {{P}} -&gt;
⊨ {{Binary And P e0}} s0 {{P}} -&gt;
σ&#39; ⊨ P -&gt;
While e s = While e0 s0 -&gt;
c ⊨c Binary And P (Unary Not e0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br><span><var>HPe</var><span class="hyp-type"><b>: </b><span>σ ⊨ Binary And P e</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ&#39; ⊨ P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk58" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk58"><span class="nb">specialize</span> (IHhoare _ HPe _ HWhile1).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>HWhile1</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HWhile2</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ&#39; ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
« σ&#39; » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>IHHWhile2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e0</span> <span class="nv">s0</span>,
⊢ {{Binary And P e0}} s0 {{P}} -&gt;
⊨ {{Binary And P e0}} s0 {{P}} -&gt;
σ&#39; ⊨ P -&gt;
While e s = While e0 s0 -&gt;
c ⊨c Binary And P (Unary Not e0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>« σ&#39; » ⊨c P</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br><span><var>HPe</var><span class="hyp-type"><b>: </b><span>σ ⊨ Binary And P e</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ&#39; ⊨ P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk59" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk59"><span class="nb">destruct</span> IHhoare <span class="kr">as</span> [? [[= &lt;-] ?]].</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, σ'</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>HWhile1</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « σ&#39; »</span></span></span><br><span><var>HWhile2</var><span class="hyp-type"><b>: </b><span>⟨ While e s | σ&#39; ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile1</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
« σ&#39; » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>IHHWhile2</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e0</span> <span class="nv">s0</span>,
⊢ {{Binary And P e0}} s0 {{P}} -&gt;
⊨ {{Binary And P e0}} s0 {{P}} -&gt;
σ&#39; ⊨ P -&gt;
While e s = While e0 s0 -&gt;
c ⊨c Binary And P (Unary Not e0)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>H2</var><span class="hyp-type"><b>: </b><span>σ&#39; ⊨ P</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br><span><var>HPe</var><span class="hyp-type"><b>: </b><span>σ ⊨ Binary And P e</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">σ&#39; ⊨ P</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk5a" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk5a">+ <span class="c">(* σ ⊨ ~e *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ Unary Not e</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">« σ » ⊨c Binary And P (Unary Not e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk5b" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk5b"><span class="kr">exists</span> <span class="nv">σ</span>;<span class="nb">split</span>;[<span class="bp">reflexivity</span>|];<span class="kr">exists</span> <span class="mi">1</span>;<span class="nb">split</span>;[|<span class="nb">auto</span>];<span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ Unary Not e</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v1 &lt;- R⟦ P ⟧ σ;;
v2 &lt;-
(v2 &lt;- R⟦ e ⟧ σ;;
 <span class="kr">match</span> v2 <span class="kr">with</span>
 | AddrVal _ =&gt; None
 | IntVal i1 =&gt;
     Some
       (<span class="kr">if</span>
         <span class="kr">match</span> i1 <span class="kr">with</span>
         | <span class="mi">0</span> =&gt; true
         | S _ =&gt; false
         <span class="kr">end</span>
        <span class="kr">then</span> <span class="mi">1</span>
        <span class="kr">else</span> <span class="mi">0</span>)
 <span class="kr">end</span>);;
<span class="kr">match</span> v1 <span class="kr">with</span>
| AddrVal _ =&gt; None
| IntVal i1 =&gt;
    <span class="kr">match</span> v2 <span class="kr">with</span>
    | AddrVal _ =&gt; None
    | IntVal i2 =&gt;
        Some
          (<span class="kr">if</span>
            <span class="kr">match</span> i1 <span class="kr">with</span>
            | <span class="mi">0</span> =&gt; true
            | S _ =&gt; false
            <span class="kr">end</span>
           <span class="kr">then</span> <span class="mi">0</span>
           <span class="kr">else</span> i2)
    <span class="kr">end</span>
<span class="kr">end</span> = Some <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk5c" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk5c"><span class="nb">destruct</span> HP <span class="kr">as</span> [np [-&gt; Hnp]];<span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>σ ⊨ Unary Not e</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>np</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hnp</var><span class="hyp-type"><b>: </b><span>np &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v2 &lt;-
(v1 &lt;- R⟦ e ⟧ σ;;
 <span class="kr">match</span> v1 <span class="kr">with</span>
 | AddrVal _ =&gt; None
 | IntVal i1 =&gt;
     Some
       (<span class="kr">if</span>
         <span class="kr">match</span> i1 <span class="kr">with</span>
         | <span class="mi">0</span> =&gt; true
         | S _ =&gt; false
         <span class="kr">end</span>
        <span class="kr">then</span> <span class="mi">1</span>
        <span class="kr">else</span> <span class="mi">0</span>)
 <span class="kr">end</span>);;
<span class="kr">match</span> v2 <span class="kr">with</span>
| AddrVal _ =&gt; None
| IntVal i2 =&gt;
    Some
      (<span class="kr">if</span> <span class="kr">match</span> np <span class="kr">with</span>
          | <span class="mi">0</span> =&gt; true
          | S _ =&gt; false
          <span class="kr">end</span>
       <span class="kr">then</span> <span class="mi">0</span>
       <span class="kr">else</span> i2)
<span class="kr">end</span> = Some <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk5d" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk5d"><span class="nb">destruct</span> H0 <span class="kr">as</span> [ne [He Hne]];<span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ne</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>R⟦ Unary Not e ⟧ σ = Some ne</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>ne &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>np</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hnp</var><span class="hyp-type"><b>: </b><span>np &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v2 &lt;-
(v1 &lt;- R⟦ e ⟧ σ;;
 <span class="kr">match</span> v1 <span class="kr">with</span>
 | AddrVal _ =&gt; None
 | IntVal i1 =&gt;
     Some
       (<span class="kr">if</span>
         <span class="kr">match</span> i1 <span class="kr">with</span>
         | <span class="mi">0</span> =&gt; true
         | S _ =&gt; false
         <span class="kr">end</span>
        <span class="kr">then</span> <span class="mi">1</span>
        <span class="kr">else</span> <span class="mi">0</span>)
 <span class="kr">end</span>);;
<span class="kr">match</span> v2 <span class="kr">with</span>
| AddrVal _ =&gt; None
| IntVal i2 =&gt;
    Some
      (<span class="kr">if</span> <span class="kr">match</span> np <span class="kr">with</span>
          | <span class="mi">0</span> =&gt; true
          | S _ =&gt; false
          <span class="kr">end</span>
       <span class="kr">then</span> <span class="mi">0</span>
       <span class="kr">else</span> i2)
<span class="kr">end</span> = Some <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk5e" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk5e"><span class="nb">cbn</span> <span class="kr">in</span> He.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ne</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>v1 &lt;- R⟦ e ⟧ σ;;
<span class="kr">match</span> v1 <span class="kr">with</span>
| AddrVal _ =&gt; None
| IntVal i1 =&gt;
    Some
      (<span class="kr">if</span>
        <span class="kr">match</span> i1 <span class="kr">with</span>
        | <span class="mi">0</span> =&gt; true
        | S _ =&gt; false
        <span class="kr">end</span>
       <span class="kr">then</span> <span class="mi">1</span>
       <span class="kr">else</span> <span class="mi">0</span>)
<span class="kr">end</span> = Some ne</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>ne &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>np</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hnp</var><span class="hyp-type"><b>: </b><span>np &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">v2 &lt;-
(v1 &lt;- R⟦ e ⟧ σ;;
 <span class="kr">match</span> v1 <span class="kr">with</span>
 | AddrVal _ =&gt; None
 | IntVal i1 =&gt;
     Some
       (<span class="kr">if</span>
         <span class="kr">match</span> i1 <span class="kr">with</span>
         | <span class="mi">0</span> =&gt; true
         | S _ =&gt; false
         <span class="kr">end</span>
        <span class="kr">then</span> <span class="mi">1</span>
        <span class="kr">else</span> <span class="mi">0</span>)
 <span class="kr">end</span>);;
<span class="kr">match</span> v2 <span class="kr">with</span>
| AddrVal _ =&gt; None
| IntVal i2 =&gt;
    Some
      (<span class="kr">if</span> <span class="kr">match</span> np <span class="kr">with</span>
          | <span class="mi">0</span> =&gt; true
          | S _ =&gt; false
          <span class="kr">end</span>
       <span class="kr">then</span> <span class="mi">0</span>
       <span class="kr">else</span> i2)
<span class="kr">end</span> = Some <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk5f" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk5f"><span class="nb">destruct</span> (R⟦ e ⟧ σ) <span class="kr">as</span> [[|[]]|];<span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ne</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>addr</var><span class="hyp-type"><b>: </b><span>AddrT</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>None = Some ne</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>ne &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>np</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hnp</var><span class="hyp-type"><b>: </b><span>np &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">None = Some <span class="mi">1</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk60" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ne</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>Some <span class="mi">1</span> = Some ne</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>ne &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>np</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hnp</var><span class="hyp-type"><b>: </b><span>np &lt;&gt; <span class="mi">0</span></span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk60"><hr></label><div class="goal-conclusion">Some
  (<span class="kr">if</span> <span class="kr">match</span> np <span class="kr">with</span>
      | <span class="mi">0</span> =&gt; true
      | S _ =&gt; false
      <span class="kr">end</span>
   <span class="kr">then</span> <span class="mi">0</span>
   <span class="kr">else</span> <span class="mi">1</span>) = Some <span class="mi">1</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk61" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ne, n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>Some <span class="mi">0</span> = Some ne</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>ne &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>np</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hnp</var><span class="hyp-type"><b>: </b><span>np &lt;&gt; <span class="mi">0</span></span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk61"><hr></label><div class="goal-conclusion">Some
  (<span class="kr">if</span> <span class="kr">match</span> np <span class="kr">with</span>
      | <span class="mi">0</span> =&gt; true
      | S _ =&gt; false
      <span class="kr">end</span>
   <span class="kr">then</span> <span class="mi">0</span>
   <span class="kr">else</span> <span class="mi">0</span>) = Some <span class="mi">1</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk62" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ne</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>None = Some ne</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>ne &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>np</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hnp</var><span class="hyp-type"><b>: </b><span>np &lt;&gt; <span class="mi">0</span></span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk62"><hr></label><div class="goal-conclusion">None = Some <span class="mi">1</span></div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk63" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk63"><span class="kp">all</span>: <span class="kp">try</span> <span class="bp">congruence</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>ne</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>He</var><span class="hyp-type"><b>: </b><span>Some <span class="mi">1</span> = Some ne</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>ne &lt;&gt; <span class="mi">0</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>np</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hnp</var><span class="hyp-type"><b>: </b><span>np &lt;&gt; <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Some
  (<span class="kr">if</span> <span class="kr">match</span> np <span class="kr">with</span>
      | <span class="mi">0</span> =&gt; true
      | S _ =&gt; false
      <span class="kr">end</span>
   <span class="kr">then</span> <span class="mi">0</span>
   <span class="kr">else</span> <span class="mi">1</span>) = Some <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">destruct</span> np;<span class="bp">tauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">        </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk64" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk64">+ <span class="c">(* σ ⊨ e, s,σ ⇓ not_proper *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>c</var><span class="hyp-type"><b>: </b><span>Conf</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>~ isProperTerm c</span></span></span><br><span><var>HWhile</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B c</span></span></span><br><span><var>IHHWhile</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
c ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">c ⊨c Binary And P (Unary Not e)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk65" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk65"><span class="nb">destruct</span> c;<span class="nb">cbn</span> <span class="kr">in</span> *.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>~ isProperTerm ↯</span></span></span><br><span><var>HWhile</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B ↯</span></span></span><br><span><var>IHHWhile</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
↯ ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">↯ ⊨c Binary And P (Unary Not e)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk66" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ, s0</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>~ isProperTerm « s0 »</span></span></span><br><span><var>HWhile</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B « s0 »</span></span></span><br><span><var>IHHWhile</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s1</span>,
⊢ {{Binary And P e}} s1 {{P}} -&gt;
⊨ {{Binary And P e}} s1 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s1 -&gt;
« s0 » ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk66"><hr></label><div class="goal-conclusion">« s0 » ⊨c Binary And P (Unary Not e)</div></blockquote><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk67" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>smt</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>~ isProperTerm ⟨ smt | s0 ⟩</span></span></span><br><span><var>HWhile</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B ⟨ smt | s0 ⟩</span></span></span><br><span><var>IHHWhile</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s1</span>,
⊢ {{Binary And P e}} s1 {{P}} -&gt;
⊨ {{Binary And P e}} s1 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s1 -&gt;
⟨ smt | s0 ⟩ ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk67"><hr></label><div class="goal-conclusion">⟨ smt | s0 ⟩ ⊨c Binary And P (Unary Not e)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk68" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk68"><span class="mi">2</span>: <span class="bp">contradict</span> H0; <span class="bp">now</span> <span class="kr">exists</span> <span class="nv">s0</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>~ isProperTerm ↯</span></span></span><br><span><var>HWhile</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B ↯</span></span></span><br><span><var>IHHWhile</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s0</span>,
⊢ {{Binary And P e}} s0 {{P}} -&gt;
⊨ {{Binary And P e}} s0 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s0 -&gt;
↯ ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">↯ ⊨c Binary And P (Unary Not e)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="Hoare-v-chk69" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>σ</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>smt</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>s0</var><span class="hyp-type"><b>: </b><span>State</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>σ ⊨ e</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>~ isProperTerm ⟨ smt | s0 ⟩</span></span></span><br><span><var>HWhile</var><span class="hyp-type"><b>: </b><span>⟨ s | σ ⟩ ⇓B ⟨ smt | s0 ⟩</span></span></span><br><span><var>IHHWhile</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">e</span> <span class="nv">s1</span>,
⊢ {{Binary And P e}} s1 {{P}} -&gt;
⊨ {{Binary And P e}} s1 {{P}} -&gt;
σ ⊨ P -&gt;
s = While e s1 -&gt;
⟨ smt | s0 ⟩ ⊨c Binary And P (Unary Not e)</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>IHhoare</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P e}} s {{P}}</span></span></span><br><span><var>HP</var><span class="hyp-type"><b>: </b><span>σ ⊨ P</span></span></span><br></div><label class="goal-separator" for="Hoare-v-chk69"><hr></label><div class="goal-conclusion">⟨ smt | s0 ⟩ ⊨c Binary And P (Unary Not e)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">          <span class="c">(* specialize Hoare IH like above *)</span>
</span><span class="alectryon-wsp">          </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="mi">1</span>-<span class="mi">2</span>: <span class="nb">assert</span>( σ ⊨ Binary And P e) <span class="kr">as</span> HPe <span class="bp">by</span>
            ( <span class="nb">destruct</span> HP <span class="kr">as</span> [np [Hp Hnp]];
            <span class="nb">destruct</span> H1 <span class="kr">as</span> [ne [He Hne]];<span class="nb">cbn</span>;
            <span class="kr">exists</span> (<span class="nv">if</span> <span class="nv">match</span> <span class="nv">np</span> <span class="nv">with</span>
            | <span class="mi">0</span> =&gt; true
            | S _ =&gt; false
            <span class="kr">end</span> <span class="kr">then</span> <span class="mi">0</span> <span class="kr">else</span> ne);<span class="nb">cbn</span>;
            <span class="nb">rewrite</span> Hp, He;<span class="nb">cbn</span>;<span class="nb">split</span>;<span class="nb">auto</span>;
            <span class="nb">destruct</span> np, ne;<span class="bp">congruence</span>);
          <span class="nb">specialize</span> (IHhoare _ HPe _ HWhile);
          <span class="bp">now</span> <span class="nb">destruct</span> IHhoare <span class="kr">as</span> [? [[= &lt;-] ?]].</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk6a" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk6a">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>b</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>s1, s2</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>P, Q</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P b}} s1 {{Q}}</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>⊢ {{Binary And P (Unary Not b)}} s2 {{Q}}</span></span></span><br><span><var>IHhoare1</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P b}} s1 {{Q}}</span></span></span><br><span><var>IHhoare2</var><span class="hyp-type"><b>: </b><span>⊨ {{Binary And P (Unary Not b)}} s2 {{Q}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">⊨ {{P}} If b s1 s2 {{Q}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">admit</span>. <span class="c">(* If *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk6b" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk6b">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P, P0</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">⊨ {{P0}} Block [] {{P0}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">admit</span>. <span class="c">(* Skip *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk6c" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk6c">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>s</var><span class="hyp-type"><b>: </b><span>Stmt</span></span></span><br><span><var>B</var><span class="hyp-type"><b>: </b><span>list Stmt</span></span></span><br><span><var>P, Q, R</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>⊢ {{P}} s {{Q}}</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>⊢ {{Q}} Block B {{R}}</span></span></span><br><span><var>IHhoare1</var><span class="hyp-type"><b>: </b><span>⊨ {{P}} s {{Q}}</span></span></span><br><span><var>IHhoare2</var><span class="hyp-type"><b>: </b><span>⊨ {{Q}} Block B {{R}}</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">⊨ {{P}} Block (s :: B) {{R}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">admit</span>. <span class="c">(* Block *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk6d" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk6d">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>P ⇒ e</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">⊨ {{P}} Assert e {{P}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">admit</span>. <span class="c">(* Assert *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="Hoare-v-chk6e" style="display: none" type="checkbox"><label class="alectryon-input" for="Hoare-v-chk6e">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>H_fresh_vars</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> (<span class="nv">ρ</span> : VarEnv) (<span class="nv">x</span> <span class="nv">y</span> : VarT)
  (<span class="nv">a_x</span> <span class="nv">a_y</span> : AddrT),
x &lt;&gt; y -&gt;
lookup ρ x = Some a_x -&gt;
lookup ρ y = Some a_y -&gt; a_x &lt;&gt; a_y</span></span></span><br><span><var>P</var><span class="hyp-type"><b>: </b><span>Property</span></span></span><br><span><var>e</var><span class="hyp-type"><b>: </b><span>Expr</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">⊨ {{P}} Assume e {{Binary And P e}}</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">admit</span>. <span class="c">(* Assume *)</span></span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Admitted</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">

</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">End</span> <span class="nf">Syntactic</span>.</span></span></pre></article></body></html>